#include <avr/io.h>
//
#define DM_SEL (*(volatile unsigned int *)0x8004)
#define DM_DATA (*(volatile unsigned int *)0x8006)
//
int word[7][10] = {
{
	0b0000000000,	//H = 0
	0b0010000100,
	0b0010000100,
	0b0010000100,
	0b0011111100,
	0b0010000100,
	0b0010000100,
	0b0010000100,
	0b0010000100,
	0b0000000000
},{
	0b0000000000,	//E = 1
	0b0011111100,
	0b0010000000,
	0b0010000000,
	0b0011111100,
	0b0010000000,
	0b0010000000,
	0b0010000000,
	0b0011111100,
	0b0000000000
},{
	0b0000000000,	//L = 2
	0b0010000000,
	0b0010000000,
	0b0010000000,
	0b0010000000,
	0b0010000000,
	0b0010000000,
	0b0010000000,
	0b0011111100,
	0b0000000000
},{
	0b0000000000,	//O = 3
	0b0000110000,
	0b0001001000,
	0b0010000100,
	0b0010000100,
	0b0010000100,
	0b0010000100,
	0b0001001000,
	0b0000110000,
	0b0000000000
},{
	0b0000000000,	//W = 4
	0b0100000010,	
	0b0100000100,
	0b0100000100,
	0b0010100100,
	0b0010101000,
	0b0010101000,
	0b0001101000,
	0b0000110000,
	0b0000000000
},{
	0b0000000000,	//R = 5
	0b0111110000,
	0b0100010000,
	0b0100010000,
	0b0111110000,
	0b0101000000,
	0b0100100000,
	0b0100010000,
	0b0100001000,
	0b0000000000
},{
	0b0000000000,	//D = 6
	0b0111110000,
	0b0110011000,
	0b0110001100,
	0b0110001100,
	0b0110001100,
	0b0110001100,
	0b0110011000,
	0b0111110000,
	0b0000000000
}};
//
int wordarr[10] = {0,1,2,2,3,4,3,5,2,6};
//
void delay(int n) 
{
    volatile int i, j;
    for (i = 0; i < 1000; i++) 
	{
        for (j = 0; j < n; j++);
    }
}
//
void dot_matrix(int index, int time)
{
	for(int i = 0; i < time; i++)
	{
		for(int j = 0; j < i; j++)
		{
			for(int k = 0; k < 10; k++)
			{
				DM_SEL = (1<<(k));
				DM_DATA = (word[index][k]);	
				delay(100);   
			}
		}
	}
}
//
int main() 
{
	MCUCR=0x80;
	DM_DATA=0;
	DM_SEL=0;
	
	int wordarr_index = 0;
	
    while (1) 
	{
		dot_matrix(wordarr[wordarr_index],10);
		wordarr_index = (wordarr_index == 9) ? 0 : (wordarr_index + 1);
    }
    return 0;
}
